(this["webpackJsonpgoit-react-hw-04-hooks-feedback"]=this["webpackJsonpgoit-react-hw-04-hooks-feedback"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3rEeD",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2sAoH"}},11:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2JaoP",mesageError:"ImageGallery_mesageError__22SQ0"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1gfRK",Modal:"Modal_Modal__muzzg"}},15:function(e,t,a){e.exports={Button:"Button_Button__8DKgw"}},17:function(e,t,a){e.exports={spinnerLoader:"Loader_spinnerLoader__QANlg"}},23:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__13nVG",SearchForm:"Searchbar_SearchForm__1yEIz",SearchForm_button:"Searchbar_SearchForm_button__3ihnT",SearchForm_buttonLabel:"Searchbar_SearchForm_buttonLabel__2NBQt",SearchForm_input:"Searchbar_SearchForm_input__nPeJ4","SearchForm-input":"Searchbar_SearchForm-input__1LGes"}},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=(a(23),a(3)),l=a(18),i=a(9),u=a.n(i),m=a(14),b=a(4),h=a.n(b),j=a(1);function d(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(j.jsxs)("header",{className:h.a.Searchbar,children:[Object(j.jsxs)("form",{className:h.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?t(c):Object(m.b)("Please, enter photo title.")},children:[Object(j.jsx)("button",{type:"submit",className:h.a.SearchForm_button,children:Object(j.jsx)("span",{className:h.a.SearchForm_buttonLabel,children:"Search"})}),Object(j.jsx)("input",{className:h.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){var t=e.currentTarget.value;o(t)}})]}),Object(j.jsx)(m.a,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})]})}var f=a(13),p="22518811-75a4d59ad2b4028ec2f8190e0",g="https://pixabay.com/api/",_=a(10),O=a.n(_);function x(e){var t=e.gallery,a=e.modalImageData,n=function(e){console.log(),a(e.target.parentNode.getAttribute("srcmodal"))};return Object(j.jsx)(j.Fragment,{children:t.map((function(e){var t=e.id,a=e.webformatURL,r=e.tags,c=e.largeImageURL;return Object(j.jsx)("li",{className:O.a.ImageGalleryItem,onClick:n,srcmodal:c,children:Object(j.jsx)("img",{id:t,src:a,alt:r,loading:"lazy",className:O.a.ImageGalleryItemImage})},t)}))})}var y=a(15),S=a.n(y);function I(e){var t=e.page,a=e.onLoadMore;e.search;return Object(j.jsx)("button",{type:"button",className:S.a.Button,onClick:function(e){e.preventDefault(),a(t+1)},children:"Load more"})}var v=a(16),N=a.n(v),k=a(17),w=a.n(k),F=function(){return Object(j.jsx)("div",{className:w.a.spinnerLoader,children:Object(j.jsx)(N.a,{type:"ThreeDots",color:"#5a61bb",height:100,width:100})})},E=a(11),L=a.n(E);function G(e){var t=e.search,a=e.modalImage,r=Object(n.useState)([]),c=Object(s.a)(r,2),o=c[0],l=c[1],i=Object(n.useState)(1),u=Object(s.a)(i,2),m=u[0],b=u[1],h=Object(n.useState)(!1),d=Object(s.a)(h,2),_=d[0],O=d[1],y=Object(n.useState)(!1),S=Object(s.a)(y,2),v=S[0],N=S[1],k=o.length>0&&!_;return Object(n.useEffect)((function(){if(""!==t)return l([]),O(!0),b(1),fetch("".concat(g,"?q=").concat(t,"&page=1&key=").concat(p,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){if(!e.ok)throw new Error(e.status);e.json().then((function(e){var t=e.hits;t.length>0?(l(t),N(!1)):N(!0)})).catch((function(){return N(!0)})).finally((function(){return O(!1)}))}))}),[t]),Object(n.useEffect)((function(){if(m>1)return O(!0),fetch("".concat(g,"?q=").concat(t,"&page=").concat(m,"&key=").concat(p,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){if(!e.ok)throw new Error(e.status);e.json().then((function(e){return l((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e.hits))}))})).finally((function(){return O(!1)}))}))}),[m,t]),Object(n.useEffect)((function(){o.length>0&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[o]),Object(j.jsxs)(j.Fragment,{children:[v&&Object(j.jsxs)("h1",{className:L.a.mesageError,children:["No results found for your request '",t,"'!",Object(j.jsx)("br",{}),"Please search again."]}),o.length>0&&Object(j.jsx)("ul",{className:L.a.ImageGallery,children:Object(j.jsx)(x,{gallery:o,modalImageData:function(e){a(e)}})}),k&&Object(j.jsx)(I,{page:m,onLoadMore:function(e){b(e)},search:t}),_&&Object(j.jsx)(F,{})]})}var B=a(12),M=a.n(B),A=document.querySelector("#modal-root");function C(e){var t=e.onClose,a=e.children;return Object(n.useEffect)((function(){var e=function(e){console.log(e),"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}})),Object(c.createPortal)(Object(j.jsx)("div",{className:M.a.Overlay,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(j.jsx)("div",{className:M.a.Modal,children:a})}),A)}a(45);function D(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),f=h[0],p=h[1],g=function(){m(!1)};return Object(j.jsxs)("div",{className:u.a.App,children:[Object(j.jsx)(d,{onSubmit:function(e){r(e)}}),Object(j.jsx)("main",{children:Object(j.jsx)(G,{search:a,modalImage:function(e){p(e),m(!0)}})}),i&&Object(j.jsxs)(C,{onClose:g,children:[Object(j.jsx)("img",{src:f,alt:""}),Object(j.jsx)("button",{type:"button",className:u.a.closeBtn,onClick:g,children:Object(j.jsx)(l.a,{})})]})]})}o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={App:"App_App__1huBN",closeBtn:"App_closeBtn__M3LIm",closeModal:"App_closeModal__3k2tB"}}},[[46,1,2]]]);
//# sourceMappingURL=main.9737d220.chunk.js.map